{% extends 'base.html' %}
{% from 'bootstrap/form.html' import render_form, render_field %}
{% from 'bootstrap/utils.html' import render_messages %}
{% from 'bootstrap/pagination.html' import render_pager, render_pagination %}
{% block title %}
    <title>{{ post.title }}</title>
{% endblock %}
{% block app_content %}
    <div class="row">

        <div class="col-md-9">
            {% if post %}
                <div class="card-body" id="card-post">
                    <h4 class="card-title text-primary">{{ post.title }}</h4>
                    <div id="card-sub-info">
                        <span class="badge badge-pill" id="card-badge-pill">{{ post.article_type.type_name }}</span>
                        {#                        <small class="text-muted form-control-sm">{{ post.create_time }}</small>#}
                        <span class="badge badge-secondary">{{ post.create_time }}</span>
                        <span class="badge badge-pill badge-secondary" style="display: block;float: right">
                        {{ post.click_num }}
                        </span>
                        <span class="badge badge-pill badge-secondary" style="display: block;float: right">
                            {{ post.love_num }}
                        </span>
                    </div>
                    <p>{{ post.content }}</p>
                </div>

                <hr>

                {% if comments %}
                    {% for comment in comments %}
                        <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                            <div class="toast-header">
                                <strong class="mr-auto">{{ comment.author }}</strong>
                                <small>{{ comment.create_time }}</small>&nbsp;&nbsp;
                                <a href="{{ url_for('article.reply_comment', comment_id=comment.id) }}"><small>Reply</small></a>
                            </div>
                            <div class="toast-body">
                                {{ comment.comment }}
                                {% if comment.replied %}

                                    <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                                        <div class="toast-header">
                                            <strong class="mr-auto">{{ comment.replied.author }}</strong>
                                            <small>{{ comment.replied.create_time }}</small>&nbsp;&nbsp;
                                            <a href="{{ url_for('article.reply_comment', comment_id=comment.id) }}"><small>Reply</small></a>
                                        </div>
                                        <div class="toast-body">
                                            {{ comment.replied.comment }}
                                        </div>
                                    </div>

                                {% else %}

                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}


                {{ render_messages() }}
                {{ render_form(form) }}

                {{ render_pagination(pagination, fragment='#submit') }}

            {% else %}
                <div class="alert alert-dismissible alert-light">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    <p>No post</p>
                </div>
            {% endif %}


        </div>

        <div class="col-md-3">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">Header</div>
                <div class="card-body">
                    <h4 class="card-title">Primary card title</h4>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of
                        the
                        card's content.</p>
                </div>
            </div>

        </div>

    </div>



{% endblock %}