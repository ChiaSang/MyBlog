{% extends "base.html" %}
{% block title %}
<title>个人信息管理</title>
{% endblock %}
{% block app_content %}
<div class="container" style="margin-top: 5%">
    <form class="form-inline mb-2" action="{{ url_for('user.user_search') }}" method="POST">
        <div class="form-group mx-sm-3 mb-2">
            <input type="text" class="form-control" id="inputPassword2" placeholder="user or phone number"
                name="search">
        </div>
        <button type="submit" class="btn btn-primary mb-2">查询</button>
    </form>
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Username</th>
                <th scope="col">Passwd</th>
                <th scope="col">Phone</th>
                <th scope="col">register time</th>
                <th scope="col">Operate</th>
            </tr>
        </thead>
        <tbody>
            {% for usr in search_list %}
            <tr>
                <th scope="row">{{ loop.index }}</th>
                <td>{{ usr.name }}</td>
                <td>{{ usr.passwd }}</td>
                <td>{{ usr.phone }}</td>
                <td>{{ usr.rtime }}</td>
                <td>
                    <a href="/update?id={{ user.id }}" class="badge badge-dark">更新</a>
                    <a href="/delete?id={{ user.id }}" class="badge badge-dark">删除</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="container">
    <form action="{{ url_for('user.user_update') }}" method="POST" enctype="multipart/form-data">
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">Username</label>
            <div class="col-sm-10">
                <input type="hidden" value="{{ user.id }}" name="id">
                <input type="text" class="form-control" id="inputEmail3" value="{{ user.name }}" name="username">
            </div>
        </div>
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">Email</label>
            <div class="col-sm-10">
                <input type="email" class="form-control" id="inputEmail3" value="{{ user.email }}" name="email">
            </div>
        </div>
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">Phone</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="inputEmail3" value="{{ user.phone }}" name="phone">
            </div>
        </div>
        <div class="form-group row">
            <label for="inputEmail3" class="col-sm-2 col-form-label">Date</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="inputEmail3" value="{{ user.rtime }}" readonly>
            </div>
        </div>
        <button type="submit" class="btn btn-primary mb-2">更新</button>
    </form>
</div>
{% endblock %}